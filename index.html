import express from "express";
import cors from "cors";
import fs from "fs";

const app = express();
const PORT = process.env.PORT || 3000;

// Habilita CORS para qualquer origem
app.use(cors());
app.use(express.json());

// Mock database
const dbPath = "./db.json";

// Get cuts
app.get("/cuts", (req, res) => {
  fs.readFile(dbPath, (err, data) => {
    if (err) return res.status(500).json({ error: "Erro ao ler o banco de dados." });
    const cuts = JSON.parse(data);
    res.json(cuts);
  });
});

// Register new cut
app.post("/cuts", (req, res) => {
  const newCut = req.body;

  fs.readFile(dbPath, (err, data) => {
    if (err) return res.status(500).json({ error: "Erro ao ler o banco de dados." });

    const cuts = JSON.parse(data);
    cuts.push(newCut);

    fs.writeFile(dbPath, JSON.stringify(cuts, null, 2),
